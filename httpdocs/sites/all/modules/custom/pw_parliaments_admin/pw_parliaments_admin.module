<?php

/**
 * @file
 * Module file for PW Imports modules for Drupal hooks
 */


/**
 * Implements hook_menu().
 */
function pw_parliaments_admin_menu() {
  $items = [];

  $items['admin/abgeordnetenwatch/imports/add'] = [
    'title' => 'Add new import',
    'page callback' => 'pw_parliaments_admin_addform_pagecallback',
    'access arguments' => ['administrate an import'],
    'type' => MENU_CALLBACK,
    'file' => 'pw_parliaments_admin.pagecallbacks.inc'
  ];

  $items['admin/abgeordnetenwatch/imports/%pw_import/edit'] = [
    'title' => 'Edit import',
    'page callback' => 'pw_parliaments_admin_editorm_pagecallback',
    'page arguments' => [3],
    'access arguments' => ['administrate an import'],
    'type' => MENU_CALLBACK,
    'file' => 'pw_parliaments_admin.pagecallbacks.inc'
  ];


  $items['admin/abgeordnetenwatch/imports/%pw_import'] = [
    'title' => 'Administrate import',
    'page callback' => 'pw_parliaments_admin_view_pagecallback',
    'page arguments' => [3],
    'access arguments' => ['administrate an import'],
    'type' => MENU_CALLBACK,
    'file' => 'pw_parliaments_admin.pagecallbacks.inc'
  ];


  return $items;
}


/**
 * Loader function for Imports
 *
 * @param int|string $id
 * The id of the import
 *
 * @return \Drupal\pw_parliaments_admin\Entity\Import
 */
function pw_import_load($id) {
  return \Drupal\pw_parliaments_admin\Entity\Import::load($id);
}


/**
 * Implements hook_permission().
 */
function pw_parliaments_admin_permission() {
  return [
    'administrate an import' => [
      'title' => t('Administrate an import'),
      'description' => t('Needed to create, edit and finish imports')
    ]
  ];
}


/**
 * Implements hook_views_api().
 */
function pw_parliaments_admin_views_api() {
  return array(
    'api' => 3,
    'path' => drupal_get_path('module', 'pw_parliaments_admin') . '/views',
  );
}
